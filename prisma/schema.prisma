generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                  String                  @id @unique @default(uuid())
  emailVerified       Boolean                 @default(false)
  createdAt           DateTime                @default(now())
  fullName            String
  email               String                  @unique
  hashedPassword      String
  isPaidUser          Boolean                 @default(false)
  role                UserRole                @default(free)
  isBlocked           Boolean                 @default(false)
  lastLogin           DateTime?
}

enum UserRole {
  free
  tier1
  tier2
  tier3
}

model Currency {
  id                                  String   @id @default(uuid())
  name                                String
  short_code                          String   @unique
  code                                String
  precision                           Int
  symbol                              String
  symbol_first                        Boolean
  decimal_mark                        String
  thousands_separator                 String
  rate                                Float
  createdAt                           DateTime @default(now())
  updatedAt                           DateTime @updatedAt
  exchangeRates                       CurrencyExchangeRate[]
}

model CurrencyExchangeRate {
  id               String    @id @default(uuid())
  currencyId       String
  rate             Float
  date             DateTime

  currency         Currency  @relation(fields: [currencyId], references: [id])

  @@unique([currencyId, date])
}

model Platform {
  id                                  String          @id @default(uuid())
  name                                String
  logo                                String
  type                                PlatformType
  createdAt                           DateTime          @default(now())
  updatedAt                           DateTime          @updatedAt
  isActive                            Boolean          @default(true)
}

enum PlatformType {
  Bank
  Broker
  Crypto_Exchange
  Crypto_Wallet
}